<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ng∆∞·ªùi C·∫ßm Quy·ªÅn Simulator - With Difficulty Modes</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&family=Source+Sans+Pro:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        font-family: "Source Sans Pro", sans-serif;
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
        color: #f5f5f5;
        overflow-x: hidden;
      }

      /* Difficulty Selection Screen */
      .difficulty-selection {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.95);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .difficulty-modal {
        background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
        padding: 40px;
        border-radius: 20px;
        max-width: 700px;
        text-align: center;
        border: 2px solid #444;
        box-shadow: 0 20px 40px rgba(0,0,0,0.8);
      }

      .difficulty-option {
        margin: 20px 0;
        padding: 25px;
        border: 2px solid #444;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #333 0%, #222 100%);
      }

      .difficulty-option:hover {
        border-color: #4caf50;
        background: linear-gradient(135deg, #444 0%, #333 100%);
        transform: translateY(-2px);
      }

      .difficulty-option h3 {
        margin: 0 0 10px 0;
        color: #fff;
        font-size: 1.4em;
      }

      .difficulty-option p {
        margin: 0 0 10px 0;
        color: #ccc;
        font-size: 1.1em;
      }

      .difficulty-stats {
        font-size: 0.9em;
        color: #999;
        margin-top: 10px;
      }

      #difficulty-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0,0,0,0.8);
        color: white;
        padding: 10px 15px;
        border-radius: 20px;
        font-size: 14px;
        z-index: 500;
        border: 1px solid #444;
      }

      /* Start Screen */
      .start-screen {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #000 0%, #333 50%, #000 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        text-align: center;
        transition: opacity 0.8s ease;
      }

      .start-screen.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .start-title {
        font-family: "Merriweather", serif;
        font-size: 3.5em;
        font-weight: 700;
        color: #fff;
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
        letter-spacing: 2px;
      }

      .start-subtitle {
        font-size: 1.3em;
        color: #ccc;
        text-align: center;
        margin-bottom: 40px;
        font-style: italic;
      }

      .start-btn {
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        border: none;
        padding: 20px 40px;
        font-size: 1.3em;
        font-weight: 600;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.4s ease;
        text-transform: uppercase;
        letter-spacing: 2px;
        box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
      }

      .start-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(76, 175, 80, 0.4);
      }

      /* Guide Button */
      .guide-btn {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2d2d2d;
        color: #ffffff;
        border: 2px solid #555;
        padding: 12px 20px;
        font-size: 1em;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 999;
        text-transform: uppercase;
        letter-spacing: 1px;
        display: none;
      }

      .guide-btn:hover {
        background: #1a1a1a;
        border-color: #777;
        color: #fff;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
      }

      /* Guide Modal */
      .guide-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.95);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .guide-content {
        background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
        padding: 30px;
        border-radius: 20px;
        max-width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        border: 2px solid #444;
        box-shadow: 0 20px 40px rgba(0,0,0,0.8);
      }

      .guide-title {
        font-size: 2rem;
        color: #fff;
        text-align: center;
        margin-bottom: 20px;
      }

      .guide-section {
        margin-bottom: 25px;
        padding: 20px;
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
      }

      .guide-section h3 {
        color: #4caf50;
        font-size: 1.3em;
        margin-bottom: 15px;
      }

      .guide-section h4 {
        color: #ffd700;
        font-size: 1.1em;
        margin: 15px 0 10px 0;
      }

      .guide-section p, .guide-section li {
        color: #ccc;
        line-height: 1.6;
        margin-bottom: 8px;
      }

      .guide-section ul {
        margin-left: 20px;
      }

      .ending-item {
        background: rgba(0,0,0,0.3);
        padding: 15px;
        margin: 10px 0;
        border-radius: 8px;
        border-left: 4px solid;
      }

      .ending-success { border-left-color: #4caf50; }
      .ending-failure { border-left-color: #f44336; }
      .ending-special { border-left-color: #ff9800; }

      .close-guide {
        background: #f44336;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
        margin-top: 20px;
        float: right;
      }

      .close-guide:hover {
        background: #d32f2f;
      }

      /* Main Container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .header h1 {
        font-family: "Merriweather", serif;
        font-size: 2.8em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .header .subtitle {
        font-size: 1.2em;
        opacity: 0.9;
        font-style: italic;
      }

      /* Stats Panel */
      .stats-panel {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        backdrop-filter: blur(10px);
      }

      .stat {
        text-align: center;
        padding: 15px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        transition: transform 0.3s ease;
      }

      .stat:hover {
        transform: translateY(-5px);
      }

      .stat-label {
        font-size: 0.9em;
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
      }

      .stat-value {
        font-size: 2em;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .stat-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        overflow: hidden;
      }

      .stat-fill {
        height: 100%;
        background: linear-gradient(90deg, #4caf50, #81c784);
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      /* Game Info */
      .game-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding: 15px 25px;
        background: rgba(0, 0, 0, 0.4);
        border-radius: 10px;
      }

      .turn-counter {
        font-size: 1.3em;
        font-weight: 600;
      }

      .game-score {
        font-size: 1.1em;
        opacity: 0.8;
      }

      /* Story Section */
      .story-section {
        background: rgba(255, 255, 255, 0.08);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 30px;
        border-left: 4px solid #4caf50;
      }

      .story-title {
        font-size: 1.4em;
        font-weight: 600;
        margin-bottom: 15px;
        color: #4caf50;
      }

      .story-text {
        font-size: 1.1em;
        line-height: 1.6;
        margin-bottom: 20px;
      }

      /* Choices */
      .choices-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .choice {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .choice:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: #4caf50;
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .choice-title {
        font-size: 1.2em;
        font-weight: 600;
        margin-bottom: 10px;
        color: #4caf50;
      }

      .choice-text {
        line-height: 1.5;
        margin-bottom: 15px;
      }

      .choice-effects {
        font-size: 0.9em;
        opacity: 0.8;
        font-style: italic;
      }

      /* Random Event */
      .random-event {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #1a1a1a;
        color: #ffffff;
        padding: 25px;
        border-radius: 12px;
        text-align: center;
        animation: slideIn 0.5s ease-out;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.8);
        border: 3px solid #555;
        max-width: 600px;
        width: 90%;
        z-index: 1500;
        display: none;
      }

      .event-title {
        font-size: 1.4em;
        font-weight: 700;
        margin-bottom: 15px;
        color: #ffffff;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      }

      .event-description {
        font-size: 1.1em;
        line-height: 1.5;
        margin-bottom: 20px;
        color: #eeeeee;
      }

      .event-effects {
        background: #333333;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #555;
      }

      .effects-title {
        font-size: 1em;
        font-weight: 600;
        margin-bottom: 10px;
        color: #ffffff;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .effects-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        font-size: 0.9em;
      }

      .effect-item {
        padding: 8px;
        background: #555555;
        border-radius: 6px;
        text-align: center;
        border: 1px solid #777;
      }

      .effect-positive {
        color: #00ff00;
        font-weight: 700;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }

      .effect-negative {
        color: #ff4444;
        font-weight: 700;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }

      .effect-neutral {
        color: #ffaa00;
        font-weight: 700;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }

      @keyframes slideIn {
        from {
          transform: translate(-50%, -60%);
          opacity: 0;
        }
        to {
          transform: translate(-50%, -50%);
          opacity: 1;
        }
      }

      /* Game End */
      .game-end {
        text-align: center;
        padding: 40px;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 20px;
        margin-top: 30px;
      }

      .game-end h2 {
        font-size: 2.5em;
        margin-bottom: 20px;
        color: #4caf50;
      }

      .ending-description {
        font-size: 1.3em;
        line-height: 1.6;
        margin-bottom: 30px;
      }

      .restart-btn {
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 1.2em;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .restart-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
      }

      /* Responsive */
      @media (max-width: 768px) {
        .start-title {
          font-size: 2.5em;
        }

        .stats-panel {
          grid-template-columns: repeat(2, 1fr);
        }

        .choices-grid {
          grid-template-columns: 1fr;
        }

        .game-info {
          flex-direction: column;
          gap: 10px;
        }

        .difficulty-modal, .guide-content {
          margin: 20px;
          padding: 30px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
      <h1 class="start-title">NG∆Ø·ªúI C·∫¶M QUY·ªÄN</h1>
      <p class="start-subtitle">Simulator Ch√≠nh Tr·ªã Chi·∫øn L∆∞·ª£c</p>
      <button class="start-btn" onclick="showDifficultySelection()">B·∫ÆT ƒê·∫¶U GAME</button>
    </div>

    <!-- Guide Button -->
    <button class="guide-btn" onclick="openGuide()" id="guideBtn">H∆Ø·ªöNG D·∫™N</button>

    <!-- Guide Modal -->
    <div class="guide-modal" id="guideModal">
      <div class="guide-content">
        <h2 class="guide-title">üéÆ H∆Ø·ªöNG D·∫™N GAME</h2>
        
        <div class="guide-section">
          <h3>üìã C√°ch Ch∆°i C∆° B·∫£n</h3>
          <p><strong>M·ª•c ti√™u:</strong> Duy tr√¨ quy·ªÅn l·ª±c v√† d·∫´n d·∫Øt ƒë·∫•t n∆∞·ªõc th√¥ng qua c√°c quy·∫øt ƒë·ªãnh ch√≠nh tr·ªã.</p>
          <p><strong>C∆° ch·∫ø:</strong> M·ªói l∆∞·ª£t, b·∫°n s·∫Ω ƒë·ªëi m·∫∑t v·ªõi c√°c t√¨nh hu·ªëng v√† ph·∫£i ch·ªçn 1 trong 2-3 l·ª±a ch·ªçn.</p>
          <p><strong>Ch·ªâ s·ªë quan tr·ªçng:</strong> Qu·∫£n l√Ω 6 ch·ªâ s·ªë - B·∫•t M√£n, Xung ƒê·ªôt, Kinh T·∫ø, M√¥i Tr∆∞·ªùng, T·ª± Do, An Ninh.</p>
        </div>

        <div class="guide-section">
          <h3>‚öôÔ∏è ƒê·ªô Kh√≥</h3>
          <p><strong>üü¢ Easy Mode (15 rounds):</strong> T√°c ƒë·ªông ti√™u c·ª±c gi·∫£m 30%, t√°c ƒë·ªông t√≠ch c·ª±c tƒÉng 20%, √≠t s·ª± ki·ªán ng·∫´u nhi√™n</p>
          <p><strong>üü° Normal Mode (30 rounds):</strong> C√¢n b·∫±ng ho√†n h·∫£o, t√°c ƒë·ªông chu·∫©n, v·ª´a ph·∫£i s·ª± ki·ªán ng·∫´u nhi√™n</p>
          <p><strong>üî¥ Hard Mode (50 rounds):</strong> T√°c ƒë·ªông ti√™u c·ª±c tƒÉng 40%, t√°c ƒë·ªông t√≠ch c·ª±c gi·∫£m 20%, nhi·ªÅu s·ª± ki·ªán ng·∫´u nhi√™n</p>
        </div>

        <div class="guide-section">
          <h3>üéØ C√°c K·∫øt Th√∫c C√≥ Th·ªÉ G·∫∑p</h3>
          
          <div class="ending-item ending-success">
            <h4>üèÜ NH√Ä L√ÉNH ƒê·∫†O T√ÄI BA - BEST LEADER EVER</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> B·∫•t M√£n ‚â§20, Xung ƒê·ªôt ‚â§25, Kinh T·∫ø ‚â•70, M√¥i Tr∆∞·ªùng ‚â•60, T·ª± Do ‚â•65, An Ninh ‚â•60</p>
            <p>K·∫øt th√∫c ho√†n h·∫£o nh·∫•t! B·∫°n c√¢n b·∫±ng xu·∫•t s·∫Øc t·∫•t c·∫£ c√°c y·∫øu t·ªë x√£ h·ªôi.</p>
          </div>

          <div class="ending-item ending-special">
            <h4>‚öîÔ∏è ƒê·ªòC T√ÄI QU√ÇN S·ª∞ (T·∫†M TH·ªúI)</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> An Ninh ‚â•75, T·ª± Do ‚â§25</p>
            <p>D·∫´n ƒë·∫øn ending Hitler Collapse sau 2 gi√¢y. Quy·ªÅn l·ª±c tuy·ªát ƒë·ªëi kh√¥ng b·ªÅn v·ªØng.</p>
          </div>

          <div class="ending-item ending-failure">
            <h4>üí• H·∫¨U QU·∫¢ C·ª¶A ƒê·ªòC T√ÄI - DICTATOR'S COLLAPSE</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> Sau khi tr·ªü th√†nh ƒë·ªôc t√†i</p>
            <p>"You look like Hitler after this you will collapse!" - C√°ch m·∫°ng l·∫≠t ƒë·ªï ch·∫ø ƒë·ªô ƒë·ªôc t√†i.</p>
          </div>

          <div class="ending-item ending-failure">
            <h4>üî• C√ÅCH M·∫†NG B√ôNG N·ªî</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> Xung ƒê·ªôt ‚â•85</p>
            <p>Ng∆∞·ªùi d√¢n n·ªïi d·∫≠y v√† l·∫≠t ƒë·ªï ch√≠nh quy·ªÅn khi xung ƒë·ªôt x√£ h·ªôi qu√° cao.</p>
          </div>

          <div class="ending-item ending-failure">
            <h4>üîª M·∫§T QUY·ªÄN L·ª∞C</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> B·∫•t M√£n ‚â•80</p>
            <p>D√¢n ch√∫ng b·∫•t m√£n t·ªõi m·ª©c tru·∫•t ph·∫ø b·∫°n kh·ªèi ch·ª©c v·ª•.</p>
          </div>

          <div class="ending-item ending-failure">
            <h4>üìâ S·ª§P ƒê·ªî KINH T·∫æ</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> Kinh T·∫ø ‚â§10</p>
            <p>N·ªÅn kinh t·∫ø s·ª•p ƒë·ªï ho√†n to√†n, ƒë·∫•t n∆∞·ªõc r∆°i v√†o kh·ªßng ho·∫£ng.</p>
          </div>

          <div class="ending-item ending-failure">
            <h4>üåç TH·∫¢M H·ªåA M√îI TR∆Ø·ªúNG</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> M√¥i Tr∆∞·ªùng ‚â§10</p>
            <p>Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u v√† √¥ nhi·ªÖm l√†m ƒë·∫•t n∆∞·ªõc kh√¥ng th·ªÉ sinh s·ªëng.</p>
          </div>

          <div class="ending-item ending-success">
            <h4>üí∞ HO√ÄNG ƒê·∫æ KINH T·∫æ</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> Kinh T·∫ø ‚â•85 (sau turn 10)</p>
            <p>Ph√°t tri·ªÉn n·ªÅn kinh t·∫ø m·∫°nh m·∫Ω, bi·∫øn ƒë·∫•t n∆∞·ªõc th√†nh c∆∞·ªùng qu·ªëc.</p>
          </div>

          <div class="ending-item ending-success">
            <h4>üå± VUA B·∫¢O V·ªÜ M√îI TR∆Ø·ªúNG</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> M√¥i Tr∆∞·ªùng ‚â•85 (sau turn 10)</p>
            <p>Bi·∫øn ƒë·∫•t n∆∞·ªõc th√†nh thi√™n ƒë∆∞·ªùng xanh v·ªõi m√¥i tr∆∞·ªùng ho√†n h·∫£o.</p>
          </div>

          <div class="ending-item ending-special">
            <h4>‚è∞ K·∫æT TH√öC NHI·ªÜM K·ª≤</h4>
            <p><strong>ƒêi·ªÅu ki·ªán:</strong> Ho√†n th√†nh h·∫øt s·ªë rounds</p>
            <p>K·∫øt th√∫c t·ª± nhi√™n, ƒë√°nh gi√° d·ª±a tr√™n c√°c ch·ªâ s·ªë cu·ªëi game.</p>
          </div>
        </div>

        <div class="guide-section">
          <h3>üí° Chi·∫øn Thu·∫≠t</h3>
          <ul>
            <li><strong>C√¢n b·∫±ng l√† ch√¨a kh√≥a:</strong> ƒê·ª´ng ƒë·ªÉ b·∫•t k·ª≥ ch·ªâ s·ªë n√†o qu√° th·∫•p ho·∫∑c qu√° cao</li>
            <li><strong>∆Øu ti√™n Kinh T·∫ø:</strong> N·ªÅn kinh t·∫ø m·∫°nh gi√∫p gi·∫£i quy·∫øt nhi·ªÅu v·∫•n ƒë·ªÅ</li>
            <li><strong>Ki·ªÉm so√°t Xung ƒê·ªôt:</strong> Lu√¥n gi·ªØ d∆∞·ªõi 80, s·ª≠ d·ª•ng ƒë·ªëi tho·∫°i khi c·∫ßn</li>
            <li><strong>ƒê·∫ßu t∆∞ d√†i h·∫°n:</strong> M√¥i Tr∆∞·ªùng v√† Gi√°o D·ª•c t·∫°o n·ªÅn t·∫£ng b·ªÅn v·ªØng</li>
            <li><strong>Linh ho·∫°t:</strong> Th√≠ch ·ª©ng v·ªõi s·ª± ki·ªán ng·∫´u nhi√™n v√† ƒëi·ªÅu ch·ªânh chi·∫øn l∆∞·ª£c</li>
          </ul>
        </div>

        <button class="close-guide" onclick="closeGuide()">ƒê√ìNG</button>
      </div>
    </div>

    <!-- Main Game -->
    <div class="container" id="gameContainer" style="display: none">
      <!-- Header -->
      <div class="header">
        <h1>NG∆Ø·ªúI C·∫¶M QUY·ªÄN</h1>
        <div class="subtitle">Quy·∫øt ƒë·ªãnh t∆∞∆°ng lai ƒë·∫•t n∆∞·ªõc</div>
      </div>

      <!-- Stats Panel -->
      <div class="stats-panel" id="statsPanel">
        <!-- Stats will be populated by JavaScript -->
      </div>

      <!-- Game Info -->
      <div class="game-info">
        <div class="turn-counter">L∆∞·ª£t <span id="turnCounter">1</span></div>
        <div class="game-score">ƒêi·ªÉm <span id="gameScore">0</span></div>
      </div>

      <!-- Story Section -->
      <div class="story-section">
        <div class="story-title" id="storyTitle">B·∫Øt ƒë·∫ßu nhi·ªám k·ª≥</div>
        <div class="story-text" id="storyText">
          Ch√†o m·ª´ng ƒë·∫øn v·ªõi gh·∫ø quy·ªÅn l·ª±c. Nh·ªØng quy·∫øt ƒë·ªãnh c·ªßa b·∫°n s·∫Ω ƒë·ªãnh h√¨nh t∆∞∆°ng lai c·ªßa ƒë·∫•t n∆∞·ªõc.
        </div>
      </div>

      <!-- Choices -->
      <div class="choices-grid" id="choicesGrid">
        <!-- Choices will be populated by JavaScript -->
      </div>

      <!-- Random Event -->
      <div class="random-event" id="randomEvent">
        <!-- Random events will be shown here -->
      </div>

      <!-- Game End -->
      <div class="game-end" id="gameEnd" style="display: none">
        <h2 id="endingTitle">Game Over</h2>
        <div class="ending-description" id="endingDescription"></div>
        <button class="restart-btn" onclick="restartGame()">Ch∆°i l·∫°i</button>
      </div>
    </div>

    <script>
      // === DIFFICULTY MODES SYSTEM ===
      
      // Global game state
      let currentDifficulty = 'normal';
      let maxTurns = 30;
      let gameState = {
        currentTurn: 1,
        stats: {
          discontent: 45,
          conflict: 35,
          economy: 55,
          environment: 50,
          freedom: 60,
          security: 45
        },
        score: 0,
        gameEnded: false,
        eventHistory: [],
        usedScenarios: []
      };

      // Difficulty modes configuration - UPDATED ROUNDS
      const DIFFICULTY_MODES = {
        easy: {
          name: "D·ªÑ - Easy Mode",
          description: "B·∫Øt ƒë·∫ßu v·ªõi √≠t t√°c ƒë·ªông ti√™u c·ª±c - Perfect for beginners",
          startingStats: {
            discontent: 35,
            conflict: 25,
            economy: 65,
            environment: 60,
            freedom: 70,
            security: 55
          },
          effectMultiplier: 0.7,
          positiveBoost: 1.2,
          randomEventsFrequency: 0.3,
          maxTurns: 15  // UPDATED: 15 rounds
        },
        normal: {
          name: "B√åNH TH∆Ø·ªúNG - Normal Mode", 
          description: "C√¢n b·∫±ng ho√†n h·∫£o - Can breathe :D",
          startingStats: {
            discontent: 45,
            conflict: 35,
            economy: 55,
            environment: 50,
            freedom: 60,
            security: 45
          },
          effectMultiplier: 1.0,
          positiveBoost: 1.0,
          randomEventsFrequency: 0.5,
          maxTurns: 30  // UPDATED: 30 rounds
        },
        hard: {
          name: "KH√ì - Hard Mode",
          description: "Th·ª≠ th√°ch kh·∫Øc nghi·ªát nh·∫•t - Most hard to play", 
          startingStats: {
            discontent: 55,
            conflict: 45,
            economy: 45,
            environment: 40,
            freedom: 50,
            security: 35
          },
          effectMultiplier: 1.4,
          positiveBoost: 0.8,
          randomEventsFrequency: 0.7,
          maxTurns: 50  // UPDATED: 50 rounds
        }
      };

      // Stat labels
      const statLabels = {
        discontent: "üî• B·∫•t M√£n",
        conflict: "‚öîÔ∏è Xung ƒê·ªôt", 
        economy: "üí∞ Kinh T·∫ø",
        environment: "üåç M√¥i Tr∆∞·ªùng",
        freedom: "üóΩ T·ª± Do",
        security: "üõ°Ô∏è An Ninh"
      };

      // Game data
      let gameStoryData = [];
      let randomEventsData = [];
      let endingsData = [];
      let dictatorModeTriggered = false;

      // Function to show difficulty selection screen
      function showDifficultySelection() {
        document.getElementById('startScreen').classList.add('hidden');
        
        const difficultyHTML = `
        <div class="difficulty-selection" id="difficultySelection">
          <div class="difficulty-modal">
            <h2 style="color: #fff; margin-bottom: 20px; font-size: 2rem;">üéÆ CH·ªåN ƒê·ªò KH√ì</h2>
            <p style="color: #ccc; margin-bottom: 30px;">SELECT DIFFICULTY MODE</p>
            
            <div class="difficulty-options">
              ${Object.entries(DIFFICULTY_MODES).map(([key, mode]) => `
                <div class="difficulty-option" onclick="selectDifficulty('${key}')">
                  <h3>${mode.name}</h3>
                  <p>${mode.description}</p>
                  <div class="difficulty-stats">
                    Starting Economy: ${mode.startingStats.economy} | 
                    Rounds: ${mode.maxTurns} | 
                    Random Events: ${Math.round(mode.randomEventsFrequency * 100)}%
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>`;
        
        document.body.insertAdjacentHTML('beforeend', difficultyHTML);
      }

      // Function to select difficulty and start game
      function selectDifficulty(difficulty) {
        currentDifficulty = difficulty;
        const mode = DIFFICULTY_MODES[difficulty];
        
        // Set starting stats based on difficulty
        gameState.stats = { ...mode.startingStats };
        maxTurns = mode.maxTurns;
        
        // Remove difficulty selection screen
        document.getElementById('difficultySelection').remove();
        
        // Show difficulty indicator
        showDifficultyIndicator(mode.name);
        
        // Start game
        startGame();
      }

      // Function to show difficulty indicator
      function showDifficultyIndicator(difficultyName) {
        const indicator = `
        <div id="difficulty-indicator">
          üéÆ ${difficultyName}
        </div>`;
        
        document.body.insertAdjacentHTML('beforeend', indicator);
      }

      // Function to apply difficulty modifiers to effects
      function applyDifficultyModifiers(effects) {
        const mode = DIFFICULTY_MODES[currentDifficulty];
        const modifiedEffects = {};
        
        Object.entries(effects).forEach(([stat, value]) => {
          if (value > 0) {
            // Positive effect - apply positive boost
            modifiedEffects[stat] = Math.round(value * mode.positiveBoost);
          } else {
            // Negative effect - apply effect multiplier
            modifiedEffects[stat] = Math.round(value * mode.effectMultiplier);
          }
        });
        
        return modifiedEffects;
      }

      // Load game data
      async function loadGameData() {
        try {
          const [storyResponse, eventsResponse, endingsResponse] = await Promise.all([
            fetch('game_story_data_expanded.json'),
            fetch('random_events_enhanced.json'),
            fetch('endings.json')
          ]);
          
          gameStoryData = await storyResponse.json();
          randomEventsData = await eventsResponse.json();
          const endingsJson = await endingsResponse.json();
          endingsData = endingsJson.endings || endingsJson;
          
          console.log('Game data loaded successfully:', {
            scenarios: gameStoryData.length,
            randomEvents: randomEventsData.length,
            endings: endingsData.length
          });
        } catch (error) {
          console.error('Error loading game data:', error);
          // Fallback data
          gameStoryData = [
            {
              id: 1,
              title: "Kh·ªßng Ho·∫£ng Kinh T·∫ø",
              description: "N·ªÅn kinh t·∫ø ƒë·∫•t n∆∞·ªõc ƒëang g·∫∑p kh√≥ khƒÉn nghi√™m tr·ªçng. GDP gi·∫£m m·∫°nh, th·∫•t nghi·ªáp tƒÉng cao. B·∫°n c·∫ßn c√≥ bi·ªán ph√°p kh·∫©n c·∫•p ƒë·ªÉ ·ªïn ƒë·ªãnh t√¨nh h√¨nh.",
              choices: [
                {
                  title: "G√≥i k√≠ch th√≠ch kinh t·∫ø 500 t·ª∑ USD",
                  text: "ƒê·∫ßu t∆∞ m·∫°nh m·∫Ω v√†o c∆° s·ªü h·∫° t·∫ßng v√† h·ªó tr·ª£ doanh nghi·ªáp",
                  effects: { discontent: -10, economy: 25, environment: -5, security: 5 }
                },
                {
                  title: "C·∫Øt gi·∫£m chi ti√™u ch√≠nh ph·ªß",
                  text: "Ki·ªÉm so√°t ng√¢n s√°ch ch·∫∑t ch·∫Ω ƒë·ªÉ ·ªïn ƒë·ªãnh t√†i ch√≠nh",
                  effects: { discontent: 15, economy: 10, security: -5, freedom: -5 }
                }
              ]
            },
            {
              id: 2,
              title: "Bi·ªÉu T√¨nh Quy M√¥ L·ªõn",
              description: "H√†ng ng√†n ng∆∞·ªùi d√¢n xu·ªëng ƒë∆∞·ªùng bi·ªÉu t√¨nh ph·∫£n ƒë·ªëi ch√≠nh s√°ch m·ªõi. T√¨nh h√¨nh c√≥ nguy c∆° b·∫•t ·ªïn.",
              choices: [
                {
                  title: "ƒê·ªëi tho·∫°i v·ªõi ng∆∞·ªùi bi·ªÉu t√¨nh",
                  text: "T·ªï ch·ª©c cu·ªôc g·∫∑p g·ª° ƒë·ªÉ l·∫Øng nghe √Ω ki·∫øn",
                  effects: { discontent: -15, conflict: -10, freedom: 10, security: -5 }
                },
                {
                  title: "TƒÉng c∆∞·ªùng an ninh",
                  text: "Tri·ªÉn khai l·ª±c l∆∞·ª£ng ƒë·ªÉ duy tr√¨ tr·∫≠t t·ª±",
                  effects: { conflict: 15, freedom: -15, security: 10, discontent: 10 }
                }
              ]
            },
            {
              id: 3,
              title: "Th·∫£m H·ªça Thi√™n Nhi√™n",
              description: "M·ªôt tr·∫≠n l·ª•t l·ªõn v·ª´a x·∫£y ra, g√¢y thi·ªát h·∫°i nghi√™m tr·ªçng. H√†ng ng√†n ng∆∞·ªùi d√¢n c·∫ßn ƒë∆∞·ª£c c·ª©u tr·ª£ kh·∫©n c·∫•p.",
              choices: [
                {
                  title: "Huy ƒë·ªông t·∫•t c·∫£ ngu·ªìn l·ª±c c·ª©u tr·ª£",
                  text: "Tri·ªÉn khai to√†n b·ªô l·ª±c l∆∞·ª£ng ƒë·ªÉ gi√∫p ƒë·ª° ng∆∞·ªùi d√¢n",
                  effects: { discontent: -20, economy: -15, security: 5, environment: 5 }
                },
                {
                  title: "K√™u g·ªçi c·ªông ƒë·ªìng qu·ªëc t·∫ø h·ªó tr·ª£",
                  text: "Y√™u c·∫ßu vi·ªán tr·ª£ t·ª´ c√°c n∆∞·ªõc b·∫°n v√† t·ªï ch·ª©c qu·ªëc t·∫ø",
                  effects: { discontent: -10, economy: -5, freedom: 5, environment: 10 }
                }
              ]
            }
          ];
          randomEventsData = [];
          endingsData = [];
        }
      }

      // Initialize game
      function startGame() {
        loadGameData().then(() => {
          document.getElementById('gameContainer').style.display = 'block';
          document.getElementById('guideBtn').style.display = 'block';
          updateDisplay();
          loadCurrentStory();
        });
      }

      // Update stats display
      function updateStatsDisplay() {
        const statsPanel = document.getElementById('statsPanel');
        statsPanel.innerHTML = '';

        Object.entries(gameState.stats).forEach(([stat, value]) => {
          const statElement = document.createElement('div');
          statElement.className = 'stat';
          
          // Color coding based on stat type and value
          let fillColor = '#4caf50'; // Default green
          if (stat === 'discontent' || stat === 'conflict') {
            // Higher is worse for these stats
            fillColor = value >= 70 ? '#ff4444' : value >= 50 ? '#ffaa00' : '#4caf50';
          } else {
            // Higher is better for these stats  
            fillColor = value >= 60 ? '#4caf50' : value >= 40 ? '#ffaa00' : '#ff4444';
          }

          statElement.innerHTML = `
            <div class="stat-label">${statLabels[stat]}</div>
            <div class="stat-value" style="color: ${fillColor}">${value}</div>
            <div class="stat-bar">
              <div class="stat-fill" style="width: ${Math.max(0, Math.min(100, value))}%; background: ${fillColor}"></div>
            </div>
          `;

          statsPanel.appendChild(statElement);
        });
      }

      // Update turn and score
      function updateGameInfo() {
        document.getElementById('turnCounter').textContent = gameState.currentTurn + '/' + maxTurns;
        document.getElementById('gameScore').textContent = gameState.score;
      }

      // FIXED: Load current story function
      function loadCurrentStory() {
        console.log(`Loading story for turn ${gameState.currentTurn}/${maxTurns}`);
        
        // Get available scenarios that haven't been used
        const availableScenarios = gameStoryData.filter(scenario => 
          !gameState.usedScenarios.includes(scenario.id)
        );
        
        let storyData;
        
        if (availableScenarios.length > 0) {
          // Use a random available scenario
          storyData = availableScenarios[Math.floor(Math.random() * availableScenarios.length)];
          gameState.usedScenarios.push(storyData.id);
          console.log(`Selected scenario: ${storyData.title} (ID: ${storyData.id})`);
        } else {
          // All scenarios used, reset and start over
          if (gameStoryData.length > 0) {
            console.log('All scenarios used, resetting used scenarios list');
            gameState.usedScenarios = [];
            storyData = gameStoryData[Math.floor(Math.random() * gameStoryData.length)];
            gameState.usedScenarios.push(storyData.id);
          } else {
            // Fallback scenario
            storyData = {
              id: 999,
              title: "Quy·∫øt ƒê·ªãnh Quan Tr·ªçng",
              description: "M·ªôt t√¨nh hu·ªëng quan tr·ªçng ƒëang ch·ªù quy·∫øt ƒë·ªãnh c·ªßa b·∫°n. H√£y c√¢n nh·∫Øc k·ªπ l∆∞·ª°ng tr∆∞·ªõc khi h√†nh ƒë·ªông.",
              choices: [
                {
                  title: "L·ª±a ch·ªçn th·∫≠n tr·ªçng",
                  text: "H√†nh ƒë·ªông m·ªôt c√°ch c·∫©n th·∫≠n v√† th·∫≠n tr·ªçng ƒë·ªÉ tr√°nh r·ªßi ro",
                  effects: { discontent: -5, security: 5, conflict: -3 }
                },
                {
                  title: "H√†nh ƒë·ªông m·∫°nh m·∫Ω", 
                  text: "ƒê∆∞a ra quy·∫øt ƒë·ªãnh quy·∫øt ƒëo√°n v√† m·∫°nh m·∫Ω ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ",
                  effects: { conflict: -5, freedom: -5, security: 10 }
                }
              ]
            };
          }
        }

        // Display the story
        document.getElementById('storyTitle').textContent = storyData.title;
        document.getElementById('storyText').textContent = storyData.description;
        displayChoices(storyData.choices);
      }

      // Display choices
      function displayChoices(choices) {
        const choicesGrid = document.getElementById('choicesGrid');
        choicesGrid.innerHTML = '';

        // Ensure we have at least 1 choice
        if (!choices || choices.length === 0) {
          choices = [{
            title: "Ti·∫øp t·ª•c",
            text: "Chuy·ªÉn sang l∆∞·ª£t ti·∫øp theo",
            effects: { discontent: 0 }
          }];
        }

        choices.forEach((choice, index) => {
          const choiceElement = document.createElement('div');
          choiceElement.className = 'choice';
          choiceElement.onclick = () => makeChoice(choice, index);

          // Create effects preview
          let effectsPreview = '';
          if (choice.effects) {
            Object.entries(choice.effects).forEach(([stat, change]) => {
              if (change !== 0) {
                const sign = change > 0 ? '+' : '';
                const statName = statLabels[stat] || stat;
                effectsPreview += `${statName} ${sign}${change} `;
              }
            });
          }

          choiceElement.innerHTML = `
            <div class="choice-title">${choice.title}</div>
            <div class="choice-text">${choice.text}</div>
            <div class="choice-effects">T√°c ƒë·ªông: ${effectsPreview || 'Kh√¥ng c√≥'}</div>
          `;

          choicesGrid.appendChild(choiceElement);
        });
      }

      // Make choice
      function makeChoice(choice, index) {
        console.log(`Making choice at turn ${gameState.currentTurn}:`, choice.title);
        
        // Apply difficulty modifiers
        const modifiedEffects = applyDifficultyModifiers(choice.effects || {});
        console.log('Modified effects:', modifiedEffects);
        
        // Apply effects
        Object.entries(modifiedEffects).forEach(([stat, change]) => {
          const oldValue = gameState.stats[stat];
          gameState.stats[stat] = Math.max(0, Math.min(100, gameState.stats[stat] + change));
          console.log(`${stat}: ${oldValue} -> ${gameState.stats[stat]} (${change > 0 ? '+' : ''}${change})`);
        });

        // Update score
        gameState.score += Math.abs(Object.values(modifiedEffects).reduce((sum, val) => sum + val, 0));

        // Update display
        updateDisplay();

        // Check for game end conditions
        if (checkGameEnd()) {
          return;
        }

        // Next turn
        gameState.currentTurn++;

        // Random event chance based on difficulty
        const mode = DIFFICULTY_MODES[currentDifficulty];
        setTimeout(() => {
          if (Math.random() < mode.randomEventsFrequency && randomEventsData.length > 0) {
            triggerRandomEvent();
            setTimeout(() => {
              loadCurrentStory();
            }, 5000);
          } else {
            loadCurrentStory();
          }
        }, 1500);
      }

      // Trigger random event
      function triggerRandomEvent() {
        const event = selectRandomEvent();
        if (event) {
          showRandomEvent(event);
        }
      }

      // Select random event
      function selectRandomEvent() {
        if (!randomEventsData || randomEventsData.length === 0) {
          return null;
        }
        
        return randomEventsData[Math.floor(Math.random() * randomEventsData.length)];
      }

      // Show random event
      function showRandomEvent(event) {
        if (!event) return;

        const randomEventEl = document.getElementById('randomEvent');

        // Apply effects with difficulty modifiers
        const modifiedEffects = applyDifficultyModifiers(event.effects || {});
        let effectsHtml = '';
        
        Object.entries(modifiedEffects).forEach(([stat, change]) => {
          if (change !== 0) {
            // Apply the effect to game state
            const oldValue = gameState.stats[stat];
            gameState.stats[stat] = Math.max(0, Math.min(100, gameState.stats[stat] + change));

            // Create display for the effect
            const label = statLabels[stat] || stat;
            const sign = change > 0 ? '+' : '';
            const className = change > 0 ? 'effect-positive' : change < 0 ? 'effect-negative' : 'effect-neutral';
            effectsHtml += `<div class="effect-item"><span class="${className}">${label} ${sign}${change}</span></div>`;
            
            console.log(`Random event effect - ${stat}: ${oldValue} -> ${gameState.stats[stat]} (${sign}${change})`);
          }
        });

        randomEventEl.innerHTML = `
          <div class="event-title">${event.title}</div>
          <div class="event-description">${event.text}</div>
          <div class="event-effects">
            <div class="effects-title">·∫¢nh H∆∞·ªüng</div>
            <div class="effects-grid">${effectsHtml}</div>
          </div>
        `;

        randomEventEl.style.display = 'block';
        
        // Update stats display after applying effects
        updateStatsDisplay();

        // Auto-hide after 5 seconds
        setTimeout(() => {
          randomEventEl.style.display = 'none';
        }, 5000);
      }

      // Check game end conditions
      function checkGameEnd() {
        // Check failure conditions
        if (gameState.stats.conflict >= 85) {
          endGame('revolution', 'üî• C√ÅCH M·∫†NG B√ôNG N·ªî', 'Xung ƒë·ªôt ƒë·∫°t m·ª©c t·ªõi h·∫°n. Ng∆∞·ªùi d√¢n n·ªïi d·∫≠y v√† l·∫≠t ƒë·ªï ch√≠nh quy·ªÅn!');
          return true;
        }

        if (gameState.stats.discontent >= 80) {
          endGame('overthrown', 'üîª M·∫§T QUY·ªÄN L·ª∞C', 'S·ª± b·∫•t m√£n c·ªßa d√¢n ch√∫ng ƒë·∫°t ƒë·ªânh ƒëi·ªÉm. B·∫°n b·ªã tru·∫•t ph·∫ø kh·ªèi ch·ª©c v·ª•!');
          return true;
        }

        if (gameState.stats.economy <= 10) {
          endGame('economiccollapse', 'üìâ S·ª§P ƒê·ªî KINH T·∫æ', 'N·ªÅn kinh t·∫ø s·ª•p ƒë·ªï ho√†n to√†n. ƒê·∫•t n∆∞·ªõc r∆°i v√†o kh·ªßng ho·∫£ng!');
          return true;
        }

        if (gameState.stats.environment <= 10) {
          endGame('environmental_disaster', 'üåç TH·∫¢M H·ªåA M√îI TR∆Ø·ªúNG', 'M√¥i tr∆∞·ªùng b·ªã t√†n ph√° nghi√™m tr·ªçng. Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u v√† √¥ nhi·ªÖm ƒë√£ l√†m ƒë·∫•t n∆∞·ªõc kh√¥ng th·ªÉ sinh s·ªëng!');
          return true;
        }

        // Check success conditions after turn 10
        if (gameState.currentTurn >= 10) {
          // Best Leader Ever ending
          if (gameState.stats.discontent <= 20 && gameState.stats.conflict <= 25 && 
              gameState.stats.economy >= 70 && gameState.stats.environment >= 60 && 
              gameState.stats.freedom >= 65 && gameState.stats.security >= 60) {
            endGame('talented_leader', 'üèÜ NH√Ä L√ÉNH ƒê·∫†O T√ÄI BA - BEST LEADER EVER', 'B·∫°n ƒë√£ th√†nh c√¥ng xu·∫•t s·∫Øc! ƒê·∫•t n∆∞·ªõc th·ªãnh v∆∞·ª£ng, d√¢n ch√∫ng h·∫°nh ph√∫c, t·ª± do ƒë∆∞·ª£c ƒë·∫£m b·∫£o v√† an ninh ·ªïn ƒë·ªãnh. You are a best leader ever! B·∫°n s·∫Ω ƒë∆∞·ª£c nh·ªõ m√£i nh∆∞ m·ªôt nh√† l√£nh ƒë·∫°o t√†i ba!');
            return true;
          }

          // Hitler aftermath ending (dictator path)
          if (gameState.stats.security >= 75 && gameState.stats.freedom <= 25) {
            if (!dictatorModeTriggered) {
              dictatorModeTriggered = true;
              // Show temporary dictator message, then collapse after 2 seconds
              setTimeout(() => {
                endGame('hitler_aftermath', 'üí• H·∫¨U QU·∫¢ C·ª¶A ƒê·ªòC T√ÄI - DICTATOR\'S COLLAPSE', 'B·∫°n ƒë√£ tr·ªü th√†nh nh√† ƒë·ªôc t√†i, nh∆∞ng l·ªãch s·ª≠ ch·ª©ng minh: "Quy·ªÅn l·ª±c tuy·ªát ƒë·ªëi d·∫´n ƒë·∫øn s·ª± s·ª•p ƒë·ªï tuy·ªát ƒë·ªëi." M·ªôt nƒÉm sau, c√°ch m·∫°ng b√πng n·ªï v√† l·∫≠t ƒë·ªï ch·∫ø ƒë·ªô ƒë·ªôc t√†i! You look like Hitler after this you will collapse! Gi·ªëng nh∆∞ trong l·ªãch s·ª≠, m·ªçi ch·∫ø ƒë·ªô ƒë·ªôc t√†i ƒë·ªÅu c√≥ ng√†y s·ª•p ƒë·ªï.');
              }, 2000);
              
              endGame('dictator_temporary', '‚öîÔ∏è ƒê·ªòC T√ÄI QU√ÇN S·ª∞ (T·∫†M TH·ªúI)', 'B·∫°n ƒë√£ thi·∫øt l·∫≠p ch·∫ø ƒë·ªô ƒë·ªôc t√†i qu√¢n s·ª±. ƒê·∫•t n∆∞·ªõc trong t·∫ßm ki·ªÉm so√°t tuy·ªát ƒë·ªëi... nh∆∞ng l·ªãch s·ª≠ s·∫Ω ph√°n x√©t...');
              return true;
            }
          }

          if (gameState.stats.economy >= 85) {
            endGame('economic_emperor', 'üí∞ HO√ÄNG ƒê·∫æ KINH T·∫æ', 'N·ªÅn kinh t·∫ø ph√°t tri·ªÉn m·∫°nh m·∫Ω. B·∫°n bi·∫øn ƒë·∫•t n∆∞·ªõc th√†nh c∆∞·ªùng qu·ªëc kinh t·∫ø!');
            return true;
          }

          if (gameState.stats.environment >= 85) {
            endGame('environmental_champion', 'üå± VUA B·∫¢O V·ªÜ M√îI TR∆Ø·ªúNG', 'B·∫°n ƒë√£ bi·∫øn ƒë·∫•t n∆∞·ªõc th√†nh thi√™n ƒë∆∞·ªùng xanh. M√¥i tr∆∞·ªùng ƒë∆∞·ª£c b·∫£o v·ªá ho√†n h·∫£o!');
            return true;
          }
        }

        // Natural end at max turns
        if (gameState.currentTurn > maxTurns) {
          endGame('natural_end', '‚è∞ K·∫æT TH√öC NHI·ªÜM K·ª≤', `B·∫°n ho√†n th√†nh nhi·ªám k·ª≥ c·∫ßm quy·ªÅn ${maxTurns} l∆∞·ª£t. K·∫øt qu·∫£ cu·ªëi c√πng t√πy thu·ªôc v√†o c√°c ch·ªâ s·ªë b·∫°n ƒë·∫°t ƒë∆∞·ª£c.`);
          return true;
        }

        return false;
      }

      // End game
      function endGame(endingType, title, description) {
        console.log(`Game ended with: ${endingType}`);
        gameState.gameEnded = true;
        document.getElementById('endingTitle').textContent = title;
        document.getElementById('endingDescription').textContent = description;
        document.getElementById('gameEnd').style.display = 'block';
        document.getElementById('choicesGrid').style.display = 'none';
      }

      // Restart game
      function restartGame() {
        console.log('Restarting game...');
        
        // Reset game state
        gameState = {
          currentTurn: 1,
          stats: {
            discontent: 45,
            conflict: 35,
            economy: 55,
            environment: 50,
            freedom: 60,
            security: 45
          },
          score: 0,
          gameEnded: false,
          eventHistory: [],
          usedScenarios: []
        };
        
        dictatorModeTriggered = false;

        // Remove difficulty indicator
        const indicator = document.getElementById('difficulty-indicator');
        if (indicator) indicator.remove();

        // Hide end screen
        document.getElementById('gameEnd').style.display = 'none';
        document.getElementById('choicesGrid').style.display = 'grid';
        document.getElementById('guideBtn').style.display = 'none';
        
        // Hide game container and show start screen
        document.getElementById('gameContainer').style.display = 'none';
        document.getElementById('startScreen').classList.remove('hidden');
      }

      // Update all displays
      function updateDisplay() {
        updateStatsDisplay();
        updateGameInfo();
      }

      // Guide functions
      function openGuide() {
        document.getElementById('guideModal').style.display = 'flex';
      }

      function closeGuide() {
        document.getElementById('guideModal').style.display = 'none';
      }

      // Close guide when clicking outside
      document.getElementById('guideModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeGuide();
        }
      });

      // Initialize when page loads
      window.addEventListener('load', function() {
        console.log('Political Simulator loaded with difficulty modes and comprehensive guide');
      });
    </script>
  </body>
</html>
